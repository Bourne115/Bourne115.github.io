(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{609:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"åŸºç¡€-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€-hook"}},[t._v("#")]),t._v(" åŸºç¡€ Hook:")]),t._v(" "),a("h3",{attrs:{id:"_1-usestate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-usestate"}},[t._v("#")]),t._v(" 1.useState")]),t._v(" "),a("h4",{attrs:{id:"åŸºç¡€ç”¨æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€ç”¨æ³•"}},[t._v("#")]),t._v(" åŸºç¡€ç”¨æ³•")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1 . åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œè¿”å›å€¼ state å’Œ initialState çš„å€¼ç›¸åŒ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. åœ¨åç»­çš„é‡æ–°æ¸²æŸ“ä¸­å—ï¼ŒuseState è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼å°†å§‹ç»ˆæ˜¯æ›´æ–°åæœ€æ–°çš„ state")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" initialState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h4",{attrs:{id:"å‡½æ•°å¼æ›´æ–°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‡½æ•°å¼æ›´æ–°"}},[t._v("#")]),t._v(" å‡½æ•°å¼æ›´æ–°")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ä»¥å°†å‡½æ•°ä¼ é€’ç»™ setCount ï¼Œ è¯¥å‡½æ•°å°†æ¥å—å…ˆå‰çš„stateï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ã€‚ã€")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevCount")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prevCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ª setCount å’Œ class ç»„ä»¶ä¸­çš„ setState æ–¹æ³•ä¸åŒï¼ŒuseStateä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡ã€‚ä½†æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°å¼çš„ setCount ç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("userInfo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setUserInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qile'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevUserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("prevUser "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useReducer æ˜¯å¦ä¸€ç§å¯é€‰æ–¹æ¡ˆï¼Œå®ƒæ›´é€‚åˆç”¨äºç®¡ç†åŒ…å«å¤šä¸ªå­å€¼çš„ state å¯¹è±¡ã€‚")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h4",{attrs:{id:"æƒ°æ€§åˆå§‹state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æƒ°æ€§åˆå§‹state"}},[t._v("#")]),t._v(" æƒ°æ€§åˆå§‹State")]),t._v(" "),a("p",[t._v("initialState å‚æ•°åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­èµ·ä½œç”¨ï¼Œåç»­æ¸²æŸ“æ—¶ä¼šè¢«å¿½ç•¥ã€‚å¦‚æœåˆå§‹stateéœ€é€šè¿‡å¤æ‚è®¡ç®—è·å¾—ï¼Œåˆ™å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­è®¡ç®—å¹¶è¿”å›åˆå§‹çš„ stateï¼Œæ­¤å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è¢«è°ƒç”¨")]),t._v(" "),a("h4",{attrs:{id:"è·³è¿‡-state-æ›´æ–°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·³è¿‡-state-æ›´æ–°"}},[t._v("#")]),t._v(" è·³è¿‡ state æ›´æ–°")]),t._v(" "),a("p",[t._v("å¦‚æœå‰ä¸€ä¸ªå’Œæ›´æ–°åçš„ state ç›¸åŒï¼Œåˆ™ä¼šè·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“å¹¶ä¸”ä¸ä¼šè§¦å‘ effect çš„æ‰§è¡Œ\nReact ç”¨çš„æ˜¯ Object.is() æ¥æ¯”è¾ƒ state")]),t._v(" "),a("h3",{attrs:{id:"_2-useeffect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-useeffect"}},[t._v("#")]),t._v(" 2.useEffect")]),t._v(" "),a("h4",{attrs:{id:"åŸºç¡€ç”¨æ³•-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€ç”¨æ³•-2"}},[t._v("#")]),t._v(" åŸºç¡€ç”¨æ³•")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¥æ”¶ä¸€ä¸ªåŒ…å«å‘½ä»¤å¼ï¼Œä¸”å¯èƒ½æœ‰å‰¯ä½œç”¨ä»£ç çš„å‡½æ•°ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤æƒ…å†µä¸‹ useEffect å®ƒä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¶å®å°±ç±»ä¼¼äº class ç»„ä»¶ä¸­ componentDidMount å’Œ componentDidUpdate è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­çš„æ•ˆæœ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h4",{attrs:{id:"æ¸…é™¤effect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¸…é™¤effect"}},[t._v("#")]),t._v(" æ¸…é™¤Effect")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸¾ä¸ªğŸŒ°ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨ç»„ä»¶å¸è½½æ—¶éœ€è¦æ¸…é™¤effectåˆ›å»ºçš„ è®¢é˜…æˆ–è€…è®¡æ—¶å™¨ ID ç­‰... æƒ³è¦å®ç°è¿™ä¸€ç‚¹ï¼ŒuseEffect å‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚æ¸…é™¤å‡½æ•°å¯ä»¥æ˜¯ å‘½åå‡½æ•° ä¹Ÿå¯ä»¥æ˜¯ åŒ¿åçš„ç®­å¤´å‡½æ•°")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" subscription "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¸…é™¤è®¢é˜…")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    subscription"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscription")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("ï¼‰\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("blockquote",[a("p",[t._v("æ¸…é™¤å‡½æ•°ä¸€èˆ¬ä¼šåœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œï¼Œå¦‚æœç»„ä»¶å¤šæ¬¡æ¸²æŸ“ï¼Œåˆ™åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªeffectä¹‹å‰ï¼Œä¸Šä¸€ä¸ªeffectå°±ä¼šè¢«æ¸…é™¤ã€‚ä½†è¿™ä¹Ÿä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„è®¢é˜…ï¼Œé‚£å¦‚ä½•é¿å…æ¯æ¬¡æ›´æ–°éƒ½è§¦å‘effectçš„æ‰§è¡Œã€‚è¿™å°±éœ€è¦å€ŸåŠ© useEffect çš„ç¬¬äºŒä¸ªå‚æ•°äº†ï¼Œç¬¬äºŒä¸ªå‚æ•°éœ€è¦ä¼ é€’ä¸€ä¸ª æ•°ç»„ï¼Œå®ƒæ˜¯effectæ‰€ä¾èµ–çš„å€¼çš„é›†åˆã€‚")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¤æ—¶åªæœ‰ props.source æ”¹å˜æ—¶æ‰ä¼šé‡æ–°åˆ›å»ºè®¢é˜…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" subscription "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¸…é™¤è®¢é˜…")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    subscription"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscription")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("ï¼‰\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[a("code",[t._v("useEffect")]),t._v(" çš„ç¬¬äºŒä¸ªå‚æ•°å¦‚æœä¼ é€’ä¸€ä¸ª ç©ºæ•°ç»„ï¼Œåˆ™åªä¼šæ‰§è¡Œä¸€æ¬¡effect ï¼ˆä»…åœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œï¼‰ï¼ŒåŸç†å°±æ˜¯å‘Šè¯‰ React ä½ çš„ effect ä¸ä¾èµ–ä¸ props æˆ– state ä¸­ä»»ä½•çš„å€¼ï¼Œæ‰€ä»¥å®ƒæ°¸è¿œéƒ½ä¸éœ€è¦é‡å¤æ‰§è¡Œã€‚å¹¶ä¸”effectå†…éƒ¨çš„propså’Œstateå°±ä¼šä¸€ç›´æŒæœ‰å…¶åˆå§‹å€¼ã€‚")]),t._v(" "),a("h4",{attrs:{id:"ç”¨é€”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨é€”"}},[t._v("#")]),t._v(" ç”¨é€”")]),t._v(" "),a("p",[t._v("åªè¦æ˜¯å‰¯ä½œç”¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ useEffect() å¼•å…¥ã€‚ å®ƒçš„å¸¸è§ç”¨é€”æœ‰ä¸‹é¢å‡ ç§ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("è·å–æ•°æ®")]),t._v(" "),a("li",[t._v("äº‹ä»¶ç›‘å¬æˆ–è®¢é˜…")]),t._v(" "),a("li",[t._v("æ”¹å˜ DOM")]),t._v(" "),a("li",[t._v("è¾“å‡ºæ—¥å¿—")])]),t._v(" "),a("h4",{attrs:{id:"effectçš„æ‰§è¡Œæ—¶æœº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#effectçš„æ‰§è¡Œæ—¶æœº"}},[t._v("#")]),t._v(" effectçš„æ‰§è¡Œæ—¶æœº")]),t._v(" "),a("p",[t._v("React ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨ useEffect ï¼Œå¹¶éæ‰€æœ‰ effect éƒ½å¯ä»¥è¢«å»¶è¿Ÿæ‰§è¡Œã€‚æ¯”å¦‚ï¼Œå¯¹äºç”¨æˆ·å¯è§çš„DOMå˜æ›´å°±å¿…åœ¨æµè§ˆå™¨æ‰§è¡Œä¸‹ä¸€æ¬¡ç»˜åˆ¶å‰è¢«åŒæ­¥æ›´æ–°ï¼Œè¿™æ ·æ‰ä¸ä¼šå½±å“ç”¨æˆ·çš„è§†è§‰ä½“éªŒï¼ŒReact æä¾›äº†é¢å¤–çš„ Hook ï¼Œ useLayoutEffect æ¥å¤„ç†è¿™ç±»effectã€‚å®ƒä¸ useEffect çš„ç»“æ„ç›¸åŒï¼ŒåŒºåˆ«åªæ˜¯è°ƒç”¨çš„æ—¶æœºä¸åŒï¼Œä¼šæ—©äº useEffectã€‚")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"}),a("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯ useLayoutEffect() ä¼šé˜»å¡é¡µé¢çš„æ¸²æŸ“ã€‚")])]),a("h4",{attrs:{id:"effect-çš„ä¾èµ–é¢‘ç¹å˜åŒ–-è¯¥æ€ä¹ˆåŠ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#effect-çš„ä¾èµ–é¢‘ç¹å˜åŒ–-è¯¥æ€ä¹ˆåŠ"}},[t._v("#")]),t._v(" effect çš„ä¾èµ–é¢‘ç¹å˜åŒ–ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ")]),t._v(" "),a("p",[t._v("å…¶å®é€šè¿‡ä¸Šé¢çš„ç¬”è®°ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œå¦‚æœæˆ‘ä»¬ç»™ useEffect çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ª ç©ºæ•°ç»„ [] ï¼Œå°±å¯ä»¥è®©useEffect ä¸­ effect åªæ‰§è¡Œä¸€æ¬¡ã€‚ä½†è¿™åˆå¸¦æ¥äº†æ–°é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è®© effect ä¸­çš„stateæ›´æ–°ã€‚é‚£æ­¤æ—¶æ˜¯æ²¡æ³•åšåˆ°çš„ã€‚ä¸Šä»£ç æ¥è¯´æ˜å¦‚æœè§£å†³è¿™ä¸ªé—®é¢˜")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setState çš„å‡½æ•°å¼æ›´æ–°å½¢å¼ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timerId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("c")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨è¿™ä¸ä¾èµ–äºå¤–éƒ¨çš„ `count` å˜é‡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timerId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ‘ä»¬çš„ effect ä¸ä½¿ç”¨ç»„ä»¶ä½œç”¨åŸŸä¸­çš„ä»»ä½•å˜é‡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h4",{attrs:{id:"æ³¨æ„ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨æ„ç‚¹"}},[t._v("#")]),t._v(" æ³¨æ„ç‚¹")]),t._v(" "),a("p",[t._v("ä½¿ç”¨ useEffect() æ—¶ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚å¦‚æœæœ‰å¤šä¸ªå‰¯ä½œç”¨ï¼Œåº”è¯¥è°ƒç”¨å¤šä¸ª useEffect(), è€Œä¸åº”è¯¥åˆå¹¶å†™åœ¨ä¸€èµ·ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_3-usecontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-usecontext"}},[t._v("#")]),t._v(" 3.useContext")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("åœ¨çˆ¶ç»„ä»¶é€šè¿‡ createContext åˆ›å»º context")]),t._v(" "),a("ul",[a("li",[t._v("const MyContext = createContext(initialValue)")])])]),t._v(" "),a("li",[a("p",[t._v("åœ¨å­å­™ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œä½†åˆ«å¿˜è®° useContext çš„å‚æ•°å¿…é¡»æ˜¯ context å¯¹è±¡æœ¬èº«ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("useContext(MyContext)")]),t._v(" "),a("li",[t._v("useContext(MyContext) å…¶å®ç›¸å½“äº context API ä¸­çš„ "),a("code",[t._v("<MyContext.Consumer>")])]),t._v(" "),a("li",[t._v("useContext(MyContext) åªæ˜¯è®©ä½ èƒ½å¤Ÿè¯»å– context çš„å€¼ä»¥åŠè®¢é˜… context çš„å˜åŒ–ã€‚ä»ç„¶éœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶æ ‘ä¸­ä½¿ç”¨ "),a("code",[t._v("<MyContext.Provider>")]),t._v(" æ¥ä¸ºä¸‹å±‚ç»„ä»¶æä¾› contextã€‚")])])])]),t._v(" "),a("p",[a("strong",[t._v("å¦‚ä½•ä½¿ç”¨ï¼š")]),t._v(" "),a("iframe",{staticStyle:{width:"793px",height:"1200px",border:"0",transform:"scale(1)",overflow:"hidden"},attrs:{src:"https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-dark&wt=none&l=jsx&width=680&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=true&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=import%2520%257B%2520createContext%252C%2520useContext%252C%2520useState%2520%257D%2520from%2520%2522react%2522%250A%250Aconst%2520themes%2520%253D%2520%257B%250A%2520%2520light%253A%2520%257B%250A%2520%2520%2520%2520type%253A%2520%2522light%2522%252C%250A%2520%2520%2520%2520foreground%253A%2520%2522%2523000000%2522%252C%250A%2520%2520%2520%2520background%253A%2520%2522%2523eeeeee%2522%252C%250A%2520%2520%257D%252C%250A%2520%2520dark%253A%2520%257B%250A%2520%2520%2520%2520type%253A%2520%2522dark%2522%252C%250A%2520%2520%2520%2520foreground%253A%2520%2522%2523ffffff%2522%252C%250A%2520%2520%2520%2520background%253A%2520%2522%2523222222%2522%252C%250A%2520%2520%257D%252C%250A%257D%250Aconst%2520ThemeContext%2520%253D%2520createContext%28themes.light%29%250A%250Afunction%2520ThemedButton%28%29%2520%257B%250A%2520%2520const%2520theme%2520%253D%2520useContext%28ThemeContext%29%250A%2520%2520return%2520%28%250A%2520%2520%2520%2520%253Cbutton%2520style%253D%257B%257B%2520background%253A%2520theme.background%252C%2520color%253A%2520theme.foreground%2520%257D%257D%253E%250A%2520%2520%2520%2520%2520%2520I%2520am%2520styled%2520by%2520theme%2520context%21%250A%2520%2520%2520%2520%253C%252Fbutton%253E%250A%2520%2520%29%250A%257D%250A%250Afunction%2520Toolbar%28props%29%2520%257B%250A%2520%2520return%2520%28%250A%2520%2520%2520%2520%253Cdiv%253E%250A%2520%2520%2520%2520%2520%2520%253CThemedButton%2520%252F%253E%250A%2520%2520%2520%2520%253C%252Fdiv%253E%250A%2520%2520%29%250A%257D%250A%250Aexport%2520function%2520ContextDemo%28%29%2520%257B%250A%2520%2520const%2520%255Btheme%252C%2520setTheme%255D%2520%253D%2520useState%28themes.dark%29%250A%2520%2520const%2520handleThemeChange%2520%253D%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520const%2520currentTheme%2520%253D%2520theme.type%2520%21%253D%253D%2520%2522light%2522%2520%253F%2520themes.light%2520%253A%2520themes.dark%250A%2520%2520%2520%2520setTheme%28currentTheme%29%250A%2520%2520%257D%250A%2520%2520return%2520%28%250A%2520%2520%2520%2520%253CThemeContext.Provider%2520value%253D%257Btheme%257D%253E%250A%2520%2520%2520%2520%2520%2520%253Cbutton%2520onClick%253D%257BhandleThemeChange%257D%253E%25E7%2582%25B9%25E5%2587%25BB%25E5%2588%2587%25E6%258D%25A2%253C%252Fbutton%253E%250A%2520%2520%2520%2520%2520%2520%253CToolbar%253E%253C%252FToolbar%253E%250A%2520%2520%2520%2520%253C%252FThemeContext.Provider%253E%250A%2520%2520%29%250A%257D",sandbox:"allow-scripts allow-same-origin"}})]),t._v(" "),a("p",[t._v("æ³¨æ„ç‚¹ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶æ±‡æ€»è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ "),a("code",[t._v("<MyContext.providers>")]),t._v(" çš„ "),a("code",[t._v("value")]),t._v(" prop å†³å®š")])]),t._v(" "),a("li",[a("p",[t._v("è°ƒç”¨äº† useContext çš„ç»„ä»¶æ€»ä¼šåœ¨ context å€¼å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœé‡æ¸²æŸ“ç»„ä»¶çš„å¼€é”€è¾ƒå¤§ï¼Œä½ å¯ä»¥ é€šè¿‡ä½¿ç”¨ memoization æ¥ä¼˜åŒ–ã€‚")])])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/facebook/react/issues/15156#issuecomment-474590693",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);